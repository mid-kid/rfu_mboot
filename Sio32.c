#include <Agb.h>

void Call_thumb(void (*)());
void Sio32_Unk1(void);
void Sio32_Unk2(void);

#include "Rfu.h"
extern u8 u8_03005efc;
extern void (*Sio32IntrProc)(void);
extern struct Rfu Rfu;

void Sio32Intr(void)
{
    if (u8_03005efc == 1) {
        Call_thumb(Sio32IntrProc);
        return;
    }

    Rfu.unk_10 = 0;
    if (Rfu.modeMaster == 1) {
        Sio32_Unk1();
    } else {
        Sio32_Unk2();
    }
}

#if 1
__asm__("
.section .text
.type Sio32_Unk1, function
Sio32_Unk1:
.2byte 0xc00d,0xe1a0,0xd870,0xe92d,0x32bc,0xe59f,0xb004,0xe24c,0xee12,0xe3a0,0xe301,0xe28e,0x0000,0xe593,0x4003,0xe1a0,0xc000,0xe59e,0x0003,0xe350,0x0016,0x1a00,0x229c,0xe59f,0x129c,0xe59f,0x029c,0xe59f,0x3000,0xe5d2,0xc103,0xe781,0x3000,0xe5d2,0x1000,0xe5d0,0x3001,0xe283,0x3000,0xe5c2,0x30ff,0xe201,0x0000,0xe353,0x300a,0x05c4,0x3004,0x03a0,0x3000,0x0584,0x0058,0x0a00,0x3001,0xe241,0x3000,0xe5c0,0x2004,0xe594,0x3102,0xe3a0,0x3000,0xe58e,0x200c,0xe082,0x2004,0xe584,0x0050,0xea00,0x0000,0xe350,0x0018,0x1a00,0x0102,0xe35c,0x0005,0x0a00,0x300d,0xe5d4,0x2001,0xe3a0,0x200c,0xe5c4,0x3002,0xe083,0x300d,0xe5c4,0x0096,0xea00,0x3008,0xe5d4,0x0009,0xe5d4,0x3001,0xe283,0x0000,0xe153,0x0014,0xda00,0xc210,0xe59f,0x0100,0xe1a0,0x3000,0xe79c,0x3000,0xe58e,0x2004,0xe594,0x3009,0xe5d4,0x1000,0xe79c,0x3001,0xe283,0x3009,0xe5c4,0x2001,0xe082,0x2004,0xe584,0x0035,0xea00,0x0001,0xe350,0x000a,0x1a00,0x0102,0xe35c,0x0004,0x0a00,0x300d,0xe5d4,0x000c,0xe5c4,0x3001,0xe283,0x300d,0xe5c4,0x007b,0xea00,0x3002,0xe3a0,0x3000,0xe584,0xc000,0xe58e,0x0028,0xea00,0x0002,0xe350,0x0026,0x1a00,0xc004,0xe584,0x3c99,0xe3a0,0x2194,0xe59f,0x0000,0xe3a0,0xc000,0xe782,0x3066,0xe283,0x2180,0xe59f,0x1001,0xe280,0x1000,0xe5c2,0x082c,0xe153,0x0012,0x1a00,0x3cff,0xe20c,0x1170,0xe59f,0x3423,0xe1a0,0x3000,0xe5c1,0x0045,0xe353,0x3045,0x83a0,0x3000,0x85c1,0x3000,0xe5d1,0x20ff,0xe203,0x0000,0xe352,0x200a,0x05c4,0x3004,0x03a0,0x3000,0x0584,0x0009,0x0a00,0x3001,0xe243,0x3000,0xe5c1,0x2003,0xe3a0,0x2000,0xe584,0x0004,0xea00,0x300d,0xe5d4,0x100c,0xe5c4,0x3001,0xe283,0x300d,0xe5c4,0x0053,0xea00,0x3e12,0xe3a0,0x3301,0xe283,0x2102,0xe3a0,0x2000,0xe583,0x0001,0xe3a0,0x010f,0xeb00,0x0800,0xe1a0,0x0801,0xe350,0x0049,0x0a00,0x5f4a,0xe3a0,0x5301,0xe285,0x6a05,0xe3a0,0x300b,0xe286,0x30b0,0xe1c5,0x0000,0xe3a0,0x0105,0xeb00,0x0800,0xe1a0,0x0801,0xe350,0x003f,0x0a00,0x3000,0xe594,0x0004,0xe353,0x0032,0x1a00,0x30a7,0xe3a0,0x3499,0xe283,0x3866,0xe283,0x20a5,0xe3a0,0x10a8,0xe59f,0x2499,0xe282,0x1000,0xe591,0x2866,0xe282,0x0002,0xe151,0x0003,0x1151,0x0009,0x0a00,0x30b5,0xe3a0,0x3499,0xe283,0x3866,0xe283,0x0003,0xe151,0x0004,0x0a00,0x30b7,0xe3a0,0x3499,0xe283,0x3866,0xe283,0x0003,0xe151,0x000f,0x1a00,0x0e12,0xe3a0,0x0301,0xe280,0xcf4a,0xe3a0,0xc301,0xe28c,0x3000,0xe3a0,0x300b,0xe5c4,0x1005,0xe3a0,0x1000,0xe584,0x2102,0xe3a0,0x2000,0xe580,0x3a05,0xe283,0x2002,0xe283,0x20b0,0xe1cc,0x3082,0xe283,0x30b0,0xe1cc,0x0001,0xea00,0x3003,0xe286,0x30b0,0xe1c5,0x3000,0xe3a0,0x300d,0xe5c4,0x20ff,0xe3a0,0x200f,0xe5c4,0x3001,0xe283,0x300c,0xe5c4,0x0006,0xea00,0x5ca0,0x0300,0x5729,0x0300,0x5de0,0x0300,0x5728,0x0300,0x5cc0,0x0300,0x3003,0xe286,0x30b0,0xe1c5,0x300c,0xe5d4,0x0000,0xe353,0x0004,0x1a00,0x2f4a,0xe3a0,0x2301,0xe282,0x3a05,0xe3a0,0x3083,0xe283,0x30b0,0xe1c2,0x0000,0xe3a0,0x6870,0xe91b,0xff1e,0xe12f
.size Sio32_Unk1, .-Sio32_Unk1
");
#else
#endif

#if 1
__asm__("
.section .text
.type Sio32_Unk2, function
Sio32_Unk2:
.2byte 0xc00d,0xe1a0,0xd8f0,0xe92d,0x0000,0xe3a0,0xb004,0xe24c,0x00ba,0xeb00,0x0800,0xe1a0,0x0801,0xe350,0x00b4,0x0a00,0x1f4a,0xe3a0,0x1301,0xe281,0x2a05,0xe3a0,0x200a,0xe282,0x0294,0xe59f,0x3e12,0xe3a0,0x20b0,0xe1c1,0x3301,0xe283,0xe000,0xe590,0x4000,0xe1a0,0xc000,0xe593,0x0005,0xe35e,0x002e,0x1a00,0x3000,0xe3a0,0x5001,0xe283,0x5009,0xe5c4,0xc004,0xe584,0x2c99,0xe3a0,0x1260,0xe59f,0x2066,0xe282,0xc003,0xe781,0x082c,0xe152,0x0022,0x1a00,0x3cff,0xe20c,0x3423,0xe1a0,0x3008,0xe5c4,0x0244,0xe59f,0x2244,0xe59f,0x3000,0xe5c0,0xc000,0xe5c2,0x10ff,0xe213,0x0014,0x1a00,0x2000,0xe5d2,0x3027,0xe242,0x0036,0xe352,0x0002,0x1353,0x0007,0x8a00,0x1008,0xe5c4,0x3080,0xe282,0x2218,0xe59f,0x3499,0xe283,0x1000,0xe5c0,0x3866,0xe283,0x3000,0xe582,0x002f,0xea00,0x5008,0xe5c4,0x31fc,0xe59f,0x21fc,0xe59f,0x5000,0xe5c0,0x2000,0xe583,0x1003,0xe1a0,0x5004,0xe583,0x0028,0xea00,0x3001,0xe243,0x3000,0xe5c0,0x2006,0xe3a0,0x2000,0xe584,0x004a,0xea00,0xe000,0xe584,0x0048,0xea00,0x0006,0xe35e,0x002e,0x1a00,0x21b0,0xe59f,0x3009,0xe5d4,0x01ac,0xe59f,0xc103,0xe782,0x3009,0xe5d4,0x2000,0xe5d0,0x3001,0xe283,0x10ff,0xe202,0x3009,0xe5c4,0x0000,0xe351,0x001d,0x1a00,0x318c,0xe59f,0x3000,0xe5d3,0x2028,0xe243,0x0036,0xe353,0x0001,0x1352,0x0007,0x8a00,0x1008,0xe5c4,0x3080,0xe283,0x2170,0xe59f,0x3499,0xe283,0x1000,0xe5c0,0x3866,0xe283,0x3000,0xe582,0x0005,0xea00,0x3001,0xe3a0,0x3008,0xe5c4,0x2150,0xe59f,0x1150,0xe59f,0x3000,0xe5c0,0x000a,0xe882,0x1002,0xe1a0,0x2000,0xe3a0,0x2009,0xe5c4,0x3007,0xe3a0,0x3000,0xe584,0x1002,0xe791,0x1004,0xe584,0x2001,0xe282,0x2009,0xe5c4,0x001e,0xea00,0x3004,0xe594,0x2001,0xe242,0x2000,0xe5c0,0x300c,0xe083,0x3004,0xe584,0x0017,0xea00,0x0007,0xe35e,0x0015,0x1a00,0x20f0,0xe59f,0x3000,0xe5d2,0x0000,0xe353,0x000b,0x0a00,0x3001,0xe243,0x3000,0xe5c2,0x10e0,0xe59f,0x2009,0xe5d4,0x3009,0xe5d4,0x1102,0xe791,0x2004,0xe594,0x3001,0xe283,0x3009,0xe5c4,0x2001,0xe082,0x2004,0xe584,0x0006,0xea00,0x3009,0xe3a0,0x3000,0xe584,0x10b0,0xe59f,0x2009,0xe5d4,0x3004,0xe594,0x3102,0xe781,0x1102,0xe3a0,0x6e12,0xe3a0,0x6301,0xe286,0x1000,0xe586,0x0001,0xe3a0,0x002c,0xeb00,0x0800,0xe1a0,0x0801,0xe350,0x0026,0x0a00,0x5f4a,0xe3a0,0x5301,0xe285,0x7a05,0xe3a0,0x2000,0xe594,0x3002,0xe287,0x30b0,0xe1c5,0x0009,0xe352,0x001b,0x1a00,0x0000,0xe3a0,0x001f,0xeb00,0x0800,0xe1a0,0x0801,0xe350,0x0019,0x0a00,0x1000,0xe3a0,0x1000,0xe586,0x1000,0xe584,0x3001,0xe3a0,0x300b,0xe5c4,0x20ff,0xe3a0,0x200f,0xe5c4,0x3001,0xe1a0,0x300d,0xe5c4,0x10b0,0xe1c5,0x3028,0xe59f,0x0000,0xe593,0x2003,0xe287,0x20b0,0xe1c5,0x003c,0xeb00,0x0009,0xea00,0x5ca0,0x0300,0x5de0,0x0300,0x572a,0x0300,0x5730,0x0300,0x5cc0,0x0300,0x01ee,0x9966,0x5c98,0x0300,0x3a05,0xe3a0,0x3082,0xe283,0x30b0,0xe1c5,0x0000,0xe3a0,0x68f0,0xe91b,0xff1e,0xe12f
.size Sio32_Unk2, .-Sio32_Unk2
");
#else
#endif

#if 1
__asm__("
.section .text
.type Sio32WaitSIState, function
Sio32WaitSIState:
.2byte 0xc00d,0xe1a0,0xd800,0xe92d,0xb004,0xe24c,0xd00c,0xe24d,0x3000,0xe1a0,0x30be,0xe14b,0x3000,0xe3a0,0x3018,0xe50b,0x3018,0xe51b,0x2001,0xe283,0x2018,0xe50b,0x307c,0xe59f,0x2011,0xe5d3,0x0001,0xe352,0x000c,0x1a00,0x3018,0xe51b,0x0b26,0xe353,0x0009,0x1a00,0x3060,0xe59f,0x2003,0xe3a0,0x1002,0xe1a0,0x100a,0xe5c3,0x3050,0xe59f,0x2001,0xe3a0,0x1002,0xe1a0,0x100c,0xe5c3,0x0001,0xe3a0,0x0010,0xea00,0x3f4a,0xe3a0,0x3301,0xe283,0x20b0,0xe1d3,0x1802,0xe1a0,0x3821,0xe1a0,0x3014,0xe50b,0x2014,0xe51b,0x3004,0xe202,0x20be,0xe15b,0x1102,0xe1a0,0x0001,0xe153,0x0000,0x1a00,0x0000,0xea00,0xffdd,0xeaff,0x0000,0xe3a0,0x0000,0xea00,0x5ca0,0x0300,0x6800,0xe91b,0xff1e,0xe12f
.size Sio32WaitSIState, .-Sio32WaitSIState
");
#else
#endif

__asm__("
Call_thumb:
    bx r0
");
